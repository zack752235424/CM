<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>位置信息</title>
    <!--设置div样式-->
    <style type="text/css">
    html{height:100%}
    body{height:100%;margin:0px;padding:0px}
    #container{
        height:100%;
        opacity: 0.9;
    }
    #results{}
    </style>
    <!--导入百度地图api-->
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=vdwlUnwtXAAl0zuQQM2C5MdhLhfLZqcX"></script>

    <!--导入鼠标绘制工具-->
    <script type="text/javascript" src="http://api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js"></script>
    <link rel="stylesheet" href="http://api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css" />

    <style>
        *{
            overflow: hidden;
        }
        #input_s{
            position: absolute;
            border-color: #0C0C0C;
            width: 300px;
            height: 20px;
        }

    </style>
</head>
<body>
    <input id="input_s" type="text">
    <div id="container"></div>
    <script type="text/javascript">
        var map = new BMap.Map("container"); // 创建地图实例
        var point = new BMap.Point(103.9815939695,30.7452663885); // 创建点坐标
        map.centerAndZoom(point, 15); // 初始化地图,设置中心点坐标和地图级别
        map.addControl(new BMap.NavigationControl()); // 新加地图平移缩放功能，左上方
        map.addControl(new BMap.ScaleControl()); //添加比例尺控件，左下方
        map.addControl(new BMap.MapTypeControl());//添加地图类型控件，右上方
        map.addControl(new BMap.CopyrightControl());//添加版权控件，左下方
        map.addControl(new BMap.GeolocationControl());//移动端开发，定位控件，左下方
        map.addControl(new BMap.OverviewMapControl());//小视图控制，右下方
        map.enableDragging();//启用地图拖拽事件，默认启用(可不写)
        map.enableScrollWheelZoom();//启用地图滚轮放大缩小
        map.enableDoubleClickZoom();//启用鼠标双击放大，默认启用(可不写)
        map.enableKeyboard();//启用键盘上下左右键移动地图
//        var marker = new BMap.Marker(point);// 创建默认标注
//        map.addOverlay(marker);// 将标注添加到地图中
        // 自定义标注图形
        var mk = new BMap.Marker(point,{title:"标注提示语句"});//创建标注
        var icon = new BMap.Icon('car.png',new BMap.Size(30,32));
        icon.imageSize = new BMap.Size(30,30);
        icon.anchor = new BMap.Size(15,25);
        mk.setIcon(icon);
        map.addOverlay(mk);//将标注添加到地图中

        //窗口信息
        var opts = {
            width : 250, // 信息窗口宽度
            height: 100, // 信息窗口高度
            title : "车辆型号：" // 信息窗口标题
            }
        var infoWindow = new BMap.InfoWindow("东风商用车", opts); // 创建信息窗口对象
        map.openInfoWindow(infoWindow, map.getCenter());// 打开信息窗口

        //绘制折线
        var polyline = new BMap.Polyline([
            new BMap.Point(103.9815939695,30.7452663885),
            new BMap.Point(103.9887039186,30.7553896226)
            ],
            {strokeColor:"blue", strokeWeight:6, strokeOpacity:0.5}
            );
        map.addOverlay(polyline);

//        // 监听点击事件
//        mk.addEventListener("click", function(){
//            alert("您点击了图标。");
//        });
//        // 通过点击获取经纬度坐标
//        map.addEventListener("click", function(e){
//            alert(e.point.lng + ", " + e.point.lat);
//        });
//
//        // 监听this事件
//        map.addEventListener("click", function(){
//            alert("地图缩放至:" + this.getZoom() + "级");
//        });

        //绘制交通流量图层
        var traffic = new BMap.TrafficLayer();// 创建交通流量图层实例
        map.addTileLayer(traffic);// 将图层添加到地图上

//        //自定义地图层
//        var tilelayer = new BMap.TileLayer();// 创建地图层实例
//        tilelayer.getTilesUrl=function(tileCoord, zoom){ // 设置图块路径
//            var x = tileCoord.x;
//            var y = tileCoord.y;
//            var url = 'tiles/' + zoom + '/tile' + x + '_' + y + '.png';     //根据当前坐标，选取合适的瓦片图
//            return "car.png";
//        };
//        map.addTileLayer(tilelayer);// 将图层添加到地图上

        //本地搜索服务
        var local = new BMap.LocalSearch(map, {
            renderOptions:{map: map}
        });
        local.search("西南交大");

        //将搜索到的公交路线存入面板中
        var transit = new BMap.TransitRoute(map, {
            renderOptions: {map: map, panel: "results"}
        });
        transit.search("王府井", "西单");


        //两秒过后移动到新的位置
//        window.setTimeout(function(){
//            map.panTo(new BMap.Point(116.409, 39.918));
//        }, 2000);

        // 绘制圆形图像
        var styleOptions = {
            strokeColor:"red",    //边线颜色。
            fillColor:"red",      //填充颜色。当参数为空时，圆形将没有填充效果。
            strokeWeight: 3,       //边线的宽度，以像素为单位。
            strokeOpacity: 0.8,    //边线透明度，取值范围0 - 1。
            fillOpacity: 0.6,      //填充的透明度，取值范围0 - 1。
            strokeStyle: 'solid' //边线的样式，solid或dashed。
        }
        //实例化鼠标绘制工具
        var drawingManager = function () {
            var drawingManager1 = new BMapLib.DrawingManager(map, {
            isOpen: false, //是否开启绘制模式
            enableDrawingTool: true, //是否显示工具栏
            drawingToolOptions: {
                anchor: BMAP_ANCHOR_TOP_RIGHT, //位置
                offset: new BMap.Size(5, 5), //偏离值
            },
            circleOptions: styleOptions, //圆的样式
//            polylineOptions: styleOptions, //线的样式
//            polygonOptions: styleOptions, //多边形的样式
//            rectangleOptions: styleOptions //矩形的样式
            });
        }

    </script>
</body>
</html>